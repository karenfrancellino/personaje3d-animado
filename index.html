<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Droyz AR WebXR</title>

  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>

  <style>
    body { margin: 0; overflow: hidden; }
    #overlay {
      position: fixed;
      bottom: 30px;
      width: 100%;
      display: flex;
      justify-content: center;
      z-index: 10;
    }
  </style>
</head>

<body>

<a-scene
  webxr="optionalFeatures: hit-test, dom-overlay;
         overlayElement: #overlay"
  renderer="alpha: true; preserveDrawingBuffer: true"
  vr-mode-ui="enabled: false">

  <a-assets>
    <a-asset-item id="model"
      src="https://raw.githubusercontent.com/karenfrancellino/ar-models/main/DROYZ_ANIMAPP_SiCkJacken_v005.glb">
    </a-asset-item>
  </a-assets>

  <a-entity camera></a-entity>

  <!-- Luz -->
  <a-entity light="type: ambient; intensity: 1.2"></a-entity>

  <!-- Personagem -->
  <a-entity
    id="personaje"
    gltf-model="#model"
    scale="0.15 0.15 0.15"
    visible="false"
    animation-mixer>
  </a-entity>

  <!-- Reticle -->
  <a-entity id="reticle" ar-hit-test="target: #personaje"></a-entity>

</a-scene>

<div id="overlay">
  <button id="placeBtn">TOCAR PARA POSICIONAR</button>
</div>

<script>
  const scene = document.querySelector('a-scene');
  const reticle = document.querySelector('#reticle');
  const character = document.querySelector('#personaje');

  scene.addEventListener('click', () => {
    if (!reticle.object3D.visible) return;

    character.object3D.position.copy(reticle.object3D.position);
    character.object3D.quaternion.copy(reticle.object3D.quaternion);
    character.setAttribute('visible', true);
  });
</script>

</body>
</html>
